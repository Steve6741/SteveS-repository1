from machine import Pin, ADC, PWM
import time

# Define components
button = Pin(0, Pin.IN, Pin.PULL_UP)  # Button on GP0
buzzer = PWM(Pin(1))  # Buzzer on GP1 (PWM)
pot = ADC(26)  # Potentiometer on GP26 (ADC0)

# Setup variables
buzzer_on = False
last_button_state = 1

# Setup buzzer
buzzer.freq(1000)  # 1 kHz tone

while True:
    button_state = button.value()

    # Detect button press (high → low)
    if last_button_state == 1 and button_state == 0:
        buzzer_on = not buzzer_on
        print("Buzzer is now", "ON" if buzzer_on else "OFF")
        time.sleep(0.25)  # Debounce delay

    last_button_state = button_state

    if buzzer_on:
        # Read potentiometer (0–65535) and use it as volume
        pot_value = pot.read_u16()
        buzzer.duty_u16(pot_value)
    else:
        buzzer.duty_u16(0)

    time.sleep(0.01)
